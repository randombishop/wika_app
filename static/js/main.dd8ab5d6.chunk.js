(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{478:function(e,t){},479:function(e,t){},497:function(e,t){},499:function(e,t,n){},500:function(e,t,n){},506:function(e,t){},509:function(e,t){},511:function(e,t){},521:function(e,t){},523:function(e,t){},549:function(e,t){},551:function(e,t){},552:function(e,t){},557:function(e,t){},559:function(e,t){},565:function(e,t){},567:function(e,t){},586:function(e,t){},598:function(e,t){},601:function(e,t){},612:function(e,t){},619:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(124),s=n.n(c),o=n(5),i=n(6),u=n(12),l=n(8),d=n(9),b=a.a.createContext();function j(e){document.getElementById(e).select(),document.execCommand("copy")}function h(e){return e/1e12}function O(e){return null!=e?e.toFixed(2)+" W":"-"}function p(e){return null!=e?e.toFixed(2)+" US$":"-"}function f(e){return null==e?"":e.substr(0,5)+"..."+e.substr(44)}function x(e){if(null==e)return null;var t,n,r,a,c,s;for(t="",r=e.length,n=0;n<r;)switch((a=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(a);break;case 12:case 13:c=e[n++],t+=String.fromCharCode((31&a)<<6|63&c);break;case 14:c=e[n++],s=e[n++],t+=String.fromCharCode((15&a)<<12|(63&c)<<6|(63&s)<<0)}return t}var m=n(249),v=n(707),w=n(0),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).buttonStyle={backgroundColor:"white","&:hover":{backgroundColor:"#e0f5fd"},fontSize:"28px",color:"#1976d2"},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(w.jsx)(v.a,{size:"medium",sx:this.buttonStyle,"aria-label":"home",onClick:function(){return e.context.navigate("splash")},children:Object(w.jsx)("i",{className:"far fa-thumbs-up"})})}}]),n}(a.a.Component);k.contextType=b;var g=k,y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).buttonStyle={backgroundColor:"white","&:hover":{backgroundColor:"#e0f5fd"},textTransform:"none",fontSize:"11px",height:"18px"},e}return Object(i.a)(n,[{key:"renderStatus",value:function(){return this.context.network.ready?Object(w.jsx)("i",{style:{color:"green"},className:"fas fa-check"}):Object(w.jsx)("i",{style:{color:"orange"},className:"fas fa-spinner"})}},{key:"render",value:function(){return Object(w.jsxs)(v.a,{size:"small",variant:"extended",sx:this.buttonStyle,children:[Object(w.jsx)("i",{className:"fas fa-network-wired"}),"\xa0\xa0",this.context.network.type,"\xa0\xa0",this.renderStatus()]})}}]),n}(a.a.Component);y.contextType=b;var C=y,A=n(164),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).buttonStyle={backgroundColor:"white","&:hover":{backgroundColor:"#e0f5fd"}},e}return Object(i.a)(n,[{key:"renderDisconnected",value:function(){return Object(w.jsxs)("span",{children:[Object(w.jsx)("i",{className:"far fa-user-circle"}),"\xa0 Connect"]})}},{key:"renderConnected",value:function(){return Object(w.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(w.jsx)(A.a,{size:30,value:this.context.account.address}),Object(w.jsx)("div",{style:{marginLeft:"10px"},children:O(this.context.balance.wika)})]})}},{key:"renderButtonContent",value:function(){return this.context.account?this.renderConnected():this.renderDisconnected()}},{key:"render",value:function(){var e=this;return Object(w.jsx)(v.a,{size:"small",variant:"extended",sx:this.buttonStyle,onClick:function(){return e.context.navigate("account")},children:this.renderButtonContent()})}}]),n}(a.a.Component);S.contextType=b;var N=S,R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).headerStyle={display:"flex",alignItems:"center",background:"#F9F9F9",padding:"5px 15px",textAlign:"center"},e.titleStyle={marginLeft:"10px"},e.networkStyle={position:"absolute",top:"4px",right:"15px"},e.accountStyle={position:"absolute",top:"35px",right:"15px"},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{style:this.headerStyle,children:[Object(w.jsx)(g,{}),Object(w.jsx)(m.a,{variant:"h5",color:"primary",style:this.titleStyle,children:this.props.title}),Object(w.jsx)("div",{style:this.networkStyle,children:Object(w.jsx)(C,{})}),Object(w.jsx)("div",{style:this.accountStyle,children:Object(w.jsx)(N,{})})]})}}]),n}(a.a.Component);R.contextType=b;var U=R,B=n(715),T=n(717),D=n(716),I=n(704),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).renderColumn=function(e,t,n){return Object(w.jsxs)(B.a,{children:[Object(w.jsx)(D.a,{component:"img",image:t,alt:"",sx:{width:"80%",marginLeft:"10%",marginTop:"10px"}}),Object(w.jsxs)(T.a,{children:[Object(w.jsx)(m.a,{gutterBottom:!0,variant:"h6",component:"div",children:e}),Object(w.jsx)(m.a,{variant:"body2",color:"text.secondary",children:n})]})]})},e.render=function(){return Object(w.jsx)("div",{children:Object(w.jsxs)(I.a,{container:!0,spacing:2,children:[Object(w.jsx)(I.a,{item:!0,xs:4,children:e.renderColumn("Consumers","images/splash1.png","Like your favorite pages and reward the authors and previous likers.")}),Object(w.jsx)(I.a,{item:!0,xs:4,children:e.renderColumn("Authors","images/splash2.png","Register any web page and Wika users will be able to reward you directly.")}),Object(w.jsx)(I.a,{item:!0,xs:4,children:e.renderColumn("Everyone","images/splash3.png","Protect your privacy and promote quality content.")})]})})},e}return Object(i.a)(n)}(a.a.Component);L.contextType=b;var M=L,P=n(700),q=n(672),W=n(721),_=n(718),G=n(702),K=n(705),F=n(711),E=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).copyElement=function(e){return function(){j(e)}},e.disconnect=function(){e.context.selectAccount(null)},e.renderAccountBox=function(){var t=e.context.account.name,n=e.context.account.address;return Object(w.jsxs)(P.a,{alignItems:"flex-start",children:[Object(w.jsx)(W.a,{children:Object(w.jsx)(A.a,{value:n,size:40})}),Object(w.jsx)(q.a,{primary:t,secondary:O(e.context.balance.wika)+" / "+p(e.context.balance.usd)})]})},e.renderAddressBox=function(t,n,r){return Object(w.jsx)(G.a,{id:t,label:n,variant:"outlined",fullWidth:!0,readOnly:!0,value:r,InputProps:{startAdornment:Object(w.jsx)(_.a,{position:"start",children:Object(w.jsx)("a",{href:"/#",onClick:e.copyElement(t),children:Object(w.jsx)("i",{className:"far fa-copy"})})})}})},e.renderDisconnectButton=function(){return Object(w.jsx)(F.a,{sx:{textAlign:"center"},children:Object(w.jsxs)(K.a,{variant:"outlined",onClick:e.disconnect,children:["Disconnect this account \xa0\xa0\xa0",Object(w.jsx)("i",{className:"fas fa-sign-out-alt"})]})})},e.renderDebug=function(){return Object(w.jsx)("div",{children:JSON.stringify(e.context.account)})},e.renderInfo=function(){return Object(w.jsxs)("div",{children:[e.renderAccountBox(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),e.renderAddressBox("account_address_substrate_element","Address in Substrate format",e.context.account.address),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),e.renderAddressBox("account_address_raw_element","Address in raw format",e.context.account.addressRaw),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),e.renderDisconnectButton()]})},e.render=function(){return e.renderInfo()},e}return Object(i.a)(n)}(a.a.Component);E.contextType=b;var z=E,J=n(699),V=n(729),Y=n(731),H=n(727),X=n(677),Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.getWeb3Data(),r.getWikaData()},r.getWeb3Data=function(){r.setState({web3Wallets:null},(function(){window.BACKGROUND.web3Enable("Wika Network").then((function(e){r.setState({web3Data:e})}))}))},r.getWikaData=function(){r.setState({wikaData:null},(function(){window.WIKA_BRIDGE.accounts((function(e){r.setState({wikaData:e})}))}))},r.handleModeChange=function(e){r.setState({mode:e.target.value})},r.continue=function(){var e=r.state.mode,t="web3"===e?r.state.web3Data:r.state.wikaData;r.props.next(e,t)},r.renderRadioChoice=function(){return Object(w.jsxs)(H.a,{children:[Object(w.jsx)(X.a,{id:"account-mode-radio-label",children:"Wallet management mode"}),Object(w.jsxs)(V.a,{"aria-labelledby":"account-mode-radio-label",name:"radio-buttons-group",value:r.state.mode,onChange:r.handleModeChange,children:[Object(w.jsx)(Y.a,{value:"web3",control:Object(w.jsx)(J.a,{}),label:"Web3 wallet (for example polkadot.js)"}),Object(w.jsx)(Y.a,{value:"wika",control:Object(w.jsx)(J.a,{}),label:"Wika Browser Extension"})]})]})},r.renderMessage=function(){var e="";return"wika"===r.state.mode?e=r.state.wikaData&&r.state.wikaData.length>0?"Wika browser extension detected and accounts are configured.\n                           Let's go!":"No Wika Extension accounts detected.\n                           Please install it and make sure you have an account already set up.":"web3"===r.state.mode&&(e=r.state.web3Data&&r.state.web3Data.length>0?"Polkadot wallets detected and authorized with this app.\n                           Let's go!":"No Polkadot wallets detected.\n                           Please install one and make sure you authorize this app to use it."),Object(w.jsx)(m.a,{variant:"body1",children:e})},r.renderContinueButton=function(){var e=!0;return"web3"===r.state.mode&&r.state.web3Data&&r.state.web3Data.length>0&&(e=!1),"wika"===r.state.mode&&r.state.wikaData&&r.state.wikaData.length>0&&(e=!1),Object(w.jsx)(F.a,{align:"right",children:Object(w.jsx)(K.a,{variant:"contained",disabled:e,onClick:r.continue,children:"Continue"})})},r.render=function(){return Object(w.jsxs)("div",{children:[r.renderRadioChoice(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),r.renderMessage(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),r.renderContinueButton()]})},r.state={mode:"web3",web3Data:null,wikaData:null},r}return Object(i.a)(n)}(a.a.Component);Z.contextType=b;var $=Z,Q=n(732),ee=n(728),te=n(712),ne=n(696),re=n(722),ae=n(681),ce=n(680),se=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).handleAccountChange=function(t){e.props.selectAccount(t.target.value)},e.renderAccountItem=function(e,t){var n="";return e.meta?n=e.meta.name:e.accountName?n=e.accountName:e.name&&(n=e.name),Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsxs)(P.a,{alignItems:"flex-start",children:[Object(w.jsx)(W.a,{children:Object(w.jsx)(A.a,{value:e.address,size:40})}),Object(w.jsx)(q.a,{primary:n,secondary:f(e.address)}),Object(w.jsx)(ce.a,{children:Object(w.jsx)(J.a,{value:t})})]}),Object(w.jsx)(ae.a,{})]},t)},e.renderDebug=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:JSON.stringify(e.props.accounts)}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:JSON.stringify(e.props.account)})]})},e.renderRadioGroup=function(){return Object(w.jsx)(V.a,{name:"radio-buttons-group",value:e.props.account,onChange:e.handleAccountChange,children:Object(w.jsxs)(re.a,{width:"100%",children:[Object(w.jsx)(ae.a,{}),e.props.accounts.map(e.renderAccountItem)]})})},e.render=function(){return e.renderRadioGroup()},e}return Object(i.a)(n)}(a.a.Component),oe=se,ie=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.getAccounts()},r.getAccounts=function(){r.setState({accounts:[]},(function(){window.BACKGROUND.web3Accounts().then((function(e){r.setState({accounts:e})}))}))},r.handleProviderChange=function(e){r.setState({provider:e.target.value})},r.selectAccount=function(e){r.setState({account:e})},r.back=function(){r.props.back()},r.continue=function(){var e=r.state.accounts[r.state.account],t=e.address,n=e.meta.name,a=e.meta.source,c=window.BACKGROUND.decodeAddress(t),s={mode:"web3",name:n,address:t,addressRaw:window.BACKGROUND.u8aToHex(c),source:a};r.props.next(s)},r.renderProviderItem=function(e,t){return Object(w.jsx)(te.a,{value:t,children:e.name+" ("+e.version+")"},t)},r.renderSelectProvider=function(){return Object(w.jsx)(Q.a,{width:"100%",children:Object(w.jsxs)(H.a,{fullWidth:!0,children:[Object(w.jsx)(ee.a,{id:"select-web3-provider-label",children:"Web3 Provider"}),Object(w.jsx)(ne.a,{labelId:"select-web3-provider-label",label:"Web3 Provider",value:r.state.provider,onChange:r.handleProviderChange,children:r.props.providers.map(r.renderProviderItem)})]})})},r.renderAccountList=function(){return Object(w.jsx)(oe,{accounts:r.state.accounts,account:r.state.account,selectAccount:r.selectAccount})},r.renderActions=function(){return Object(w.jsxs)(F.a,{align:"right",children:[Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:r.back,children:"Back"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"primary",variant:"contained",onClick:r.continue,children:"Continue"})]})},r.render=function(){return Object(w.jsxs)("div",{children:[r.renderSelectProvider(),r.renderAccountList(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),r.renderActions()]})},r.state={provider:0,accounts:[],account:0},r}return Object(i.a)(n)}(a.a.Component),ue=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).selectAccount=function(e){r.setState({account:e})},r.back=function(){r.props.back()},r.continue=function(){var e=r.props.accounts[r.state.account],t={mode:"wika",name:e.name,address:e.address,addressRaw:e.addressRaw};r.props.next(t)},r.renderAccountList=function(){return Object(w.jsx)(oe,{accounts:r.props.accounts,account:r.state.account,selectAccount:r.selectAccount})},r.renderActions=function(){return Object(w.jsxs)(F.a,{align:"right",children:[Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:r.back,children:"Back"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"primary",variant:"contained",onClick:r.continue,children:"Continue"})]})},r.render=function(){return Object(w.jsxs)("div",{children:[r.renderAccountList(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),r.renderActions()]})},r.state={account:0},r}return Object(i.a)(n)}(a.a.Component),le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).cancelMode=function(){r.setState({selectedMode:null})},r.selectMode=function(e,t){r.setState({selectedMode:e,data:t})},r.selectAccount=function(e){r.context.selectAccount(e)},r.render=function(){return r.state.selectedMode?"web3"===r.state.selectedMode?Object(w.jsx)(ie,{providers:r.state.data,back:r.cancelMode,next:r.selectAccount}):Object(w.jsx)(ue,{accounts:r.state.data,back:r.cancelMode,next:r.selectAccount}):Object(w.jsx)($,{next:r.selectMode})},r.state={selectedMode:null,data:null},r}return Object(i.a)(n)}(a.a.Component);le.contextType=b;var de=le,be=n(719),je=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).renderFirstTime=function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(m.a,{variant:"h6",children:"Set-up your Wika address"}),Object(w.jsx)(ae.a,{sx:{marginBottom:"15px"}}),Object(w.jsxs)(m.a,{variant:"body1",children:["Wika Network is built in the Polkadot eco-system. You can ",Object(w.jsx)("a",{onClick:e.props.import,href:"/#",children:"IMPORT"})," an existing Polkadot address if you already have one, or ",Object(w.jsx)("a",{onClick:e.props.create,href:"/#",children:"CREATE"})," a new one from scratch."]})]})},e.renderAccountList=function(){return Object(w.jsx)(oe,{accounts:e.props.accounts,account:e.props.account,selectAccount:e.props.selectAccount})},e.renderActions=function(){var t=e.props.accounts.length>0;return Object(w.jsxs)(F.a,{align:"right",children:[Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:e.props.import,children:"Import"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:e.props.create,children:"Create"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"primary",variant:"contained",disabled:!t,onClick:e.props.next,children:"Continue"})]})},e.renderSwitch=function(){return e.props.accounts.length>0?e.renderAccountList():e.renderFirstTime()},e.render=function(){return Object(w.jsxs)("div",{children:[e.renderSwitch(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),e.renderActions()]})},e}return Object(i.a)(n)}(a.a.Component),he=je,Oe=n(730),pe=n(701),fe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){var e=window.BACKGROUND.generateAccount();console.log("newAccount",e),r.setState(e)},r.handleAccountNameChange=function(e){r.setState({accountName:e.target.value})},r.handleCheckboxChange=function(){r.setState({checkSecretSaved:!r.state.checkSecretSaved})},r.copySecret=function(){j("account_secret_element")},r.next=function(){var e={name:r.state.accountName,address:r.state.address,addressRaw:r.state.addressRaw,phrase:r.state.phrase};r.props.next(e)},r.renderNext=function(){var e=r.state.address&&r.state.addressRaw&&r.state.phrase&&r.state.checkSecretSaved;return Object(w.jsxs)(F.a,{align:"right",children:[Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:r.props.back,children:"Back"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"primary",variant:"contained",onClick:r.next,disabled:!e,children:"Continue"})]})},r.renderCopyButtonAdornment=function(){return Object(w.jsx)(_.a,{position:"end",children:Object(w.jsx)(K.a,{onClick:r.copySecret,variant:"contained",color:"secondary",children:Object(w.jsx)("i",{className:"fas fa-copy"})})})},r.state={accountName:"",address:null,addressRaw:null,phrase:"",checkSecretSaved:!1},r}return Object(i.a)(n,[{key:"render",value:function(){var e={endAdornment:this.renderCopyButtonAdornment()};return Object(w.jsxs)("div",{children:[Object(w.jsx)(m.a,{variant:"h6",children:"Create a new Wika address"}),Object(w.jsx)(ae.a,{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{label:"Account name",variant:"outlined",fullWidth:!0,value:this.state.accountName,onChange:this.handleAccountNameChange}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{id:"account_secret_element",label:"Your 12-words phrase",variant:"outlined",readOnly:!0,fullWidth:!0,value:this.state.phrase,InputProps:e}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"body2",children:[Object(w.jsxs)("strong",{children:[Object(w.jsx)("i",{className:"fas fa-exclamation-circle"})," Never share this phrase with anyone!"]}),Object(w.jsx)("br",{}),"The 12-words phrase can be used to restore your wallet. Write it down and keep it in a safe place.",Object(w.jsx)("br",{}),Object(w.jsx)("strong",{children:"Loose your secret = loose your wallet!"})]}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(Oe.a,{children:Object(w.jsx)(Y.a,{control:Object(w.jsx)(pe.a,{value:this.state.checkSecretSaved,onChange:this.handleCheckboxChange}),label:"I have safely saved my secret phrase."})}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),this.renderNext()]})}}]),n}(a.a.Component),xe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handlePhraseInputChange=function(e){r.state.imported||r.setState({phrase:e.target.value})},r.handleAccountNameChange=function(e){r.setState({accountName:e.target.value})},r.import=function(){try{var e=window.BACKGROUND.importAccount(r.state.phrase);e.imported=!0,r.setState(e)}catch(t){alert(t)}},r.clear=function(){r.setState({imported:!1,address:null,addressRaw:null,phrase:""})},r.next=function(){var e={name:r.state.accountName,address:r.state.address,addressRaw:r.state.addressRaw,phrase:r.state.phrase};r.props.next(e)},r.state={accountName:"",imported:!1,address:null,addressRaw:null,phrase:""},r}return Object(i.a)(n,[{key:"render2",value:function(){return this.state.imported?Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsx)(G.a,{label:"Account name",variant:"outlined",fullWidth:!0,value:this.state.accountName,onChange:this.handleAccountNameChange}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{label:"Public Address",variant:"outlined",fullWidth:!0,value:this.state.address,readOnly:!0}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsxs)(F.a,{align:"right",children:[Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:this.props.back,children:"Back"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:this.clear,children:"Clear"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"primary",variant:"contained",onClick:this.next,children:"Continue"})]})]}):Object(w.jsxs)(F.a,{align:"right",children:[Object(w.jsx)(K.a,{color:"secondary",variant:"contained",onClick:this.props.back,children:"Back"}),"\xa0\xa0",Object(w.jsx)(K.a,{color:"primary",variant:"contained",onClick:this.import,children:"Import"})]})}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(m.a,{variant:"h6",children:"Import your existing address"}),Object(w.jsx)(ae.a,{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{id:"account_secret_element",label:"Your 12-words phras",variant:"outlined",fullWidth:!0,value:this.state.phrase,onChange:this.handlePhraseInputChange,readOnly:this.state.imported}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),this.render2()]})}}]),n}(a.a.Component),me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){window.BACKGROUND.storage.get("accounts",(function(e){e&&e.length>0?r.setState({accounts:e}):r.setState({accounts:[]})}))},r.list=function(){r.setState({view:"list"})},r.create=function(){r.setState({view:"create"})},r.import=function(){r.setState({view:"import"})},r.addAccount=function(e){var t=r.state.accounts;t||(t=[]),t.push(e);var n=Object(u.a)(r);window.BACKGROUND.storage.set("accounts",t,(function(){n.setState({view:"list",accounts:t})}))},r.selectAccount=function(e){r.setState({account:e})},r.done=function(){var e=r.state.accounts[r.state.account];console.log("done with account selection",e),r.context.selectAccount(e)},r.renderList=function(){return Object(w.jsx)(he,{accounts:r.state.accounts,account:r.state.account,selectAccount:r.selectAccount,create:r.create,import:r.import,next:r.done})},r.renderCreate=function(){return Object(w.jsx)(fe,{next:r.addAccount,back:r.list})},r.renderImport=function(){return Object(w.jsx)(xe,{next:r.addAccount,back:r.list})},r.renderSwitch=function(){switch(r.state.view){case"list":return r.renderList();case"create":return r.renderCreate();case"import":return r.renderImport();default:return"?"}},r.render=function(){return r.state.accounts?r.renderSwitch():Object(w.jsx)(be.a,{})},r.state={view:"list",accounts:null,account:0},r}return Object(i.a)(n)}(a.a.Component);me.contextType=b;var ve=me,we=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).render=function(){return e.context.account?Object(w.jsx)(z,{}):"app"===window.BACKGROUND.env?Object(w.jsx)(de,{}):Object(w.jsx)(ve,{})},e}return Object(i.a)(n)}(a.a.Component);we.contextType=b;var ke=we,ge=n(723),ye=n(698),Ce=n(682),Ae=n(724),Se=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).handleNumLikeChange=function(e){r.setState({numLikes:e.target.value},r.update)},r.submitLike=function(){var e={url:r.props.url,referrer:r.state.referrer,numLikes:r.state.numLikes},t=r.context.account;window.BACKGROUND.sendTransaction("like",e,t,r.monitorLike)},r.monitorLike=function(e){console.log("monitorLike",e),r._mounted&&r.setState({txStatus:e.status}),e.error&&alert(e.error)},r.renderButton=function(){return null==r.state.txStatus?Object(w.jsxs)(v.a,{color:"primary",variant:"extended",onClick:r.submitLike,children:["Send ",r.state.numLikes," \xa0",Object(w.jsx)("i",{className:"fas fa-thumbs-up"})]}):Object(w.jsx)(be.a,{})},r.render=function(){return Object(w.jsx)(a.a.Fragment,{children:Object(w.jsx)(F.a,{align:"center",children:Object(w.jsxs)(B.a,{sx:{width:"75%",paddingBottom:"10px",borderRadius:"25px"},children:[Object(w.jsx)(ge.a,{title:"Like transaction",subheader:r.props.url}),Object(w.jsx)(T.a,{children:Object(w.jsx)(Ce.a,{direction:"row",sx:{width:"75%"},children:Object(w.jsx)(ye.a,{"aria-label":"Number of likes",value:r.state.numLikes,onChange:r.handleNumLikeChange})})}),Object(w.jsx)(Ae.a,{children:Object(w.jsx)(F.a,{children:r.renderButton()})})]})})})},r.state={numLikes:1},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}}]),n}(a.a.Component);Se.contextType=b;var Ne=Se,Re=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(w.jsx)(F.a,{align:"center",children:Object(w.jsxs)(B.a,{sx:{width:"75%",paddingBottom:"10px",borderRadius:"25px"},children:[Object(w.jsx)(ge.a,{title:"Thank you!",subheader:e.props.url}),Object(w.jsxs)(T.a,{children:[Object(w.jsxs)(m.a,{children:["You sent ",Object(w.jsxs)("strong",{children:[e.props.likesSubmittedCount," likes"]}),"."]}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{children:["You are ranked ",Object(w.jsxs)("strong",{children:["#",e.props.likesSubmittedAt+1]})," on the queue of people who liked this page, therefore, you will start receiving rewards when it hits ",e.props.likesSubmittedAt*e.props.rewardWaitFactor+2," likes."]})]})]})})},e}return Object(i.a)(n)}(a.a.Component),Ue=Re,Be=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).getLikePrice=function(){var e=Object(u.a)(r);window.BACKGROUND.network.getLikePrice((function(t){var n=h(t);e.setState({likePrice:n})})).catch((function(e){alert(e)}))},r.handleUrlChange=function(e){r.state.lookedUp||r.setState({url:e.target.value})},r.lookupUrl=function(){r.subscribeToUrl(),r.subscribeToLike(),r.setState({lookedUp:!0})},r.clearUrl=function(){r.unsubscribe(),r.setState({lookedUp:!1,url:"",likesSubmittedCount:null})},r.subscribeToUrl=function(){var e=Object(u.a)(r);e.unsubUrl&&(e.unsubUrl(),e.unsubUrl=null);var t=r.state.url;window.BACKGROUND.network.getUrl(t,(function(t){var n=Number(t[0]);e.setState({urlLikes:n})})).then((function(t){e.unsubUrl=t})).catch((function(e){alert(e)}))},r.subscribeToLike=function(){var e=Object(u.a)(r);e.unsubLike&&(e.unsubLike(),e.unsubLike=null);var t=r.context.account.address,n=r.state.url;window.BACKGROUND.network.getLike(t,n,(function(t){e.setState({likesSubmittedAt:Number(t[0]),likesSubmittedCount:Number(t[1]),likesSubmittedRemaining:Number(t[2])})})).then((function(t){e.unsubLike=t})).catch((function(e){alert(e)}))},r.componentWillUnmount=function(){r.unsubscribe()},r.unsubscribe=function(){r.unsubUrl&&r.unsubUrl(),r.unsubLike&&r.unsubLike()},r.renderInputAdornment=function(){return Object(w.jsx)(_.a,{position:"end",children:r.state.lookedUp?Object(w.jsx)(K.a,{onClick:r.clearUrl,variant:"contained",color:"secondary",children:Object(w.jsx)("i",{className:"fas fa-backspace"})}):Object(w.jsx)(K.a,{onClick:r.lookupUrl,variant:"contained",color:"primary",children:Object(w.jsx)("i",{className:"fas fa-search"})})})},r.renderUrlInput=function(){var e={endAdornment:r.renderInputAdornment()};return Object(w.jsx)(G.a,{id:"lookup-url-input",label:"Lookup URL status",variant:"outlined",fullWidth:!0,value:r.state.url,onChange:r.handleUrlChange,InputProps:e})},r.renderUrlNumLikes=function(){return r.state.lookedUp&&null!=r.state.urlLikes?Object(w.jsxs)(m.a,{variant:"body2",sx:{marginTop:"5px"},children:["This page received ",Object(w.jsxs)("strong",{children:[r.state.urlLikes," likes"]}),"."]}):""},r.renderDivider=function(){return r.state.lookedUp?Object(w.jsx)(ae.a,{}):""},r.renderPart2=function(){if(r.state.lookedUp&&null!=r.state.likesSubmittedCount)return r.state.likesSubmittedCount>0?Object(w.jsx)(Ue,{urlLikes:r.state.urlLikes,likesSubmittedCount:r.state.likesSubmittedCount,likesSubmittedAt:r.state.likesSubmittedAt,rewardWaitFactor:r.state.rewardWaitFactor}):Object(w.jsx)(Ne,{url:r.state.url,urlLikes:r.state.urlLikes,likePrice:r.state.likePrice})},r.render=function(){return Object(w.jsxs)("div",{children:[r.renderUrlInput(),r.renderUrlNumLikes(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),r.renderPart2()]})},r.state={lookedUp:!1,url:"",referrer:null,likePrice:null,rewardPrct:"33%",rewardTarget:1.33,rewardWaitFactor:4,urlLikes:null,likesSubmittedAt:null,likesSubmittedCount:null,likesSubmittedRemaining:null},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.getLikePrice()}}]),n}(a.a.Component);Be.contextType=b;var Te=Be,De=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{})}}]),n}(a.a.Component),Ie=De,Le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{})}}]),n}(a.a.Component),Me=Le,Pe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.queryApi()},r.queryApi=function(){var e=Object(u.a)(r),t=r.context.account.address,n=r.context.apiEndpoint.url+"/user/"+t+"/liked_urls";console.log(n),fetch(n).then((function(e){return e.json()})).then((function(t){e.setState({urls:t})}))},r.state={urls:null},r}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[JSON.stringify(this.context.apiEndpoint),Object(w.jsx)("br",{}),JSON.stringify(this.state.urls)]})}}]),n}(a.a.Component);Pe.contextType=b;var qe=Pe,We=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.queryApi()},r.queryApi=function(){var e=Object(u.a)(r),t=r.context.account.address,n=r.context.apiEndpoint.url+"/user/"+t+"/owned_urls";console.log(n),fetch(n).then((function(e){return e.json()})).then((function(t){e.setState({urls:t})}))},r.state={urls:null},r}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[JSON.stringify(this.context.apiEndpoint),Object(w.jsx)("br",{}),JSON.stringify(this.state.urls)]})}}]),n}(a.a.Component);We.contextType=b;var _e=We,Ge=n(720),Ke=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).DEFAULT_ACCOUNT="5C4hrfjw9DjXZTzV3MwzrrAr9P1MJhSrvWGWqi1eSuyUpnhM",r.NUM_BLOCKS_TO_WAIT=10,r.styleTextArea={fontFamily:"monospace",fontSize:"9px"},r.styleButton={padding:0,marginBottom:"4px"},r.componentDidMount=function(){r.getOwnersRequestPrice(),r.subscribeToBlockNumber(),r._mounted=!0},r.getOwnersRequestPrice=function(){var e=Object(u.a)(r);window.BACKGROUND.network.getOwnersRequestPrice((function(t){var n=h(t);e.setState({requestPrice:n})})).catch((function(e){alert(e)}))},r.subscribeToBlockNumber=function(){var e=Object(u.a)(r);e.unsubBlockNumber&&(e.unsubBlockNumber(),e.unsubBlockNumber=null),window.BACKGROUND.network.getBlockNumber((function(t){e.setState({currentBlock:Number(t)})})).then((function(t){e.unsubBlockNumber=t})).catch((function(e){alert(e)}))},r.handleUrlChange=function(e){r.setState({url:e.target.value})},r.lookupUrl=function(){r.setState({lookedUp:!0}),r.subscribeToUrlOwner(),r.subscribeToOwnerRequest(),r.subscribeToOwnerResult()},r.subscribeToUrlOwner=function(){var e=Object(u.a)(r);e.unsubUrlOwner&&(e.unsubUrlOwner(),e.unsubUrlOwner=null);var t=e.state.url;r.setState({owner:null},(function(){window.BACKGROUND.network.getUrlOwner(t,(function(t){e.setState({owner:""+t})})).then((function(t){e.unsubUrlOwner=t})).catch((function(e){alert(e)}))}))},r.subscribeToOwnerRequest=function(){var e=Object(u.a)(r);e.unsubOwnerRequest&&(e.unsubOwnerRequest(),e.unsubOwnerRequest=null);var t=e.state.url;r.setState({requestBlock:null,requestAccount:null},(function(){window.BACKGROUND.network.getOwnerRequest(t,(function(t){e.setState({requestBlock:Number(t[0]),requestAccount:""+t[1]})})).then((function(t){e.unsubOwnerRequest=t})).catch((function(e){alert(e)}))}))},r.subscribeToOwnerResult=function(){var e=Object(u.a)(r);e.unsubOwnerResult&&(e.unsubOwnerResult(),e.unsubOwnerResult=null);var t=e.state.url;r.setState({resultBlock:null,resultNumVotes:null,resultNumVotesYes:null,resultNumVotesMajority:null,resultIntro:null,resultMark:null,resultOutcome:null},(function(){window.BACKGROUND.network.getOwnerResult(t,(function(t){var n={resultBlock:Number(t[0]),resultNumVotes:Number(t[1]),resultNumVotesYes:Number(t[2]),resultNumVotesMajority:Number(t[3]),resultIntro:t[4],resultMark:t[5],resultOutcome:t[6]};console.log("ownerResult",n),e.setState(n)})).then((function(t){e.unsubOwnerResult=t}))}))},r.unsubscribeUrl=function(){r.unsubUrlOwner&&r.unsubUrlOwner(),r.unsubOwnerRequest&&r.unsubOwnerRequest(),r.unsubOwnerResult&&r.unsubOwnerResult()},r.clearUrl=function(){r.unsubscribeUrl(),r.setState({lookedUp:!1,url:"",owner:null})},r.submitRequest=function(){var e=r.state.url,t=r.context.account;window.BACKGROUND.sendTransaction("owner_request",{url:e},t,r.monitorRequest)},r.monitorRequest=function(e){console.log("monitorRequest",e),r._mounted&&r.setState({txStatus:e.status}),e.error&&alert(e.error)},r.testUrl=function(){},r.copyMark=function(){j("wika_mark_element")},r.componentWillUnmount=function(){r._mounted=!1,r.unsubUrlOwner&&r.unsubUrlOwner(),r.unsubOwnerRequest&&r.unsubOwnerRequest(),r.unsubOwnerResult&&r.unsubOwnerResult(),r.unsubBlockNumber&&r.unsubBlockNumber()},r.renderInputAdornment=function(){return Object(w.jsx)(_.a,{position:"end",children:r.state.lookedUp?Object(w.jsx)(K.a,{onClick:r.clearUrl,variant:"contained",color:"secondary",children:Object(w.jsx)("i",{className:"fas fa-backspace"})}):Object(w.jsx)(K.a,{onClick:r.lookupUrl,variant:"contained",color:"primary",children:Object(w.jsx)("i",{className:"fas fa-search"})})})},r.renderPart1=function(){var e={endAdornment:r.renderInputAdornment()};return Object(w.jsx)(G.a,{id:"lookup-url-input",label:"Lookup URL status",variant:"outlined",fullWidth:!0,value:r.state.url,onChange:r.handleUrlChange,disabled:r.state.lookedUp,InputProps:e})},r.renderPart2=function(){return r.state.lookedUp&&null!=r.state.owner?Object(w.jsx)(G.a,{label:"Current owner",variant:"outlined",fullWidth:!0,defaultValue:r.formatOwner(r.state.owner),disabled:!0}):""},r.formatOwner=function(e){return e===r.DEFAULT_ACCOUNT?"-":e===r.context.account.address?"You are the owner!":e},r.renderPart3=function(){return r.state.lookedUp&&null!=r.state.owner&&r.state.owner!==r.context.account.address?Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsx)(ae.a,{}),Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{variant:"subtitle1",children:"Preparation"}),Object(w.jsx)(m.a,{variant:"subtitle2",children:"1. Copy this mark"}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{label:"Ownership mark",variant:"outlined",fullWidth:!0,defaultValue:"wika.network/author/"+r.context.account.addressRaw,disabled:!0,InputProps:{endAdornment:Object(w.jsx)(_.a,{position:"end",children:Object(w.jsx)(K.a,{onClick:r.copyMark,variant:"contained",color:"primary",children:"Copy this"})})}}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"subtitle2",children:["2. Insert it in your webpage as proof of ownership ",Object(w.jsx)("br",{}),Object(w.jsx)("small",{children:"(Use an invisible img or link for example.)"})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"subtitle2",children:["3. Submit your request ",Object(w.jsx)("br",{}),Object(w.jsxs)("small",{children:["Note that the request fee is ",r.state.requestPrice," W"]})]})]}):""},r.renderTestResult=function(){return null==r.state.testResult?"":!0===r.state.testResult?"YES":"NO"},r.renderPart4=function(){if(r.state.lookedUp){var e=r.state.requestAccount;return null==e||e===r.DEFAULT_ACCOUNT?r.renderSubmitRequest():e===r.context.account.address?r.renderMyRequest():r.renderOtherRequest()}return""},r.renderSubmitRequest=function(){return r.state.owner!==r.context.address?Object(w.jsx)(F.a,{align:"center",children:null==r.state.txStatus?Object(w.jsx)(K.a,{color:"primary",variant:"contained",onClick:r.submitRequest,children:"Submit your request"}):Object(w.jsx)(be.a,{})}):""},r.renderMyRequestProgress=function(){var e=r.state.currentBlock-r.state.requestBlock,t=100*e/r.NUM_BLOCKS_TO_WAIT;return Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsx)(ae.a,{}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"subtitle2",children:["Waiting for verification results (",e,"/",r.NUM_BLOCKS_TO_WAIT,")..."]}),Object(w.jsx)(Ge.a,{variant:"determinate",value:t})]})},r.renderMyRequestResult=function(){var e=!0===r.state.resultOutcome?"fas fa-vote-yea":"fas fa-times",t=!0===r.state.resultOutcome?"approved":"rejected";return Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsx)("hr",{}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"body1",children:[Object(w.jsx)("i",{className:e}),"\xa0\xa0 Your request was ",t,"."]}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"body2",children:["Verifications: ",Object(w.jsx)("strong",{children:r.state.resultNumVotes})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(m.a,{variant:"body2",children:["Approvals: ",Object(w.jsx)("strong",{children:r.state.resultNumVotesYes})]}),Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{variant:"body2",children:"Evidence data:"}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{label:"Page intro",variant:"outlined",fullWidth:!0,defaultValue:x(r.state.resultIntro),disabled:!0}),Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{label:"Mark found",variant:"outlined",fullWidth:!0,defaultValue:x(r.state.resultMark),disabled:!0})]})},r.renderMyRequest=function(){return 0===r.state.resultBlock?r.renderMyRequestProgress():r.renderMyRequestResult()},r.renderOtherRequest=function(){return Object(w.jsxs)(m.a,{variant:"body1",children:[Object(w.jsx)("i",{className:"fas fa-exclamation-triangle"})," \xa0 There is currently another user trying to claim ownership for this URL."]})},r.state={lookedUp:!1,url:"",requestPrice:null,owner:null,requestBlock:null,requestAccount:null,currentBlock:null,txStatus:null,testResult:null},r}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[this.renderPart1(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),this.renderPart2(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),this.renderPart3(),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),this.renderPart4()]})}}]),n}(a.a.Component);Ke.contextType=b;var Fe=Ke,Ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).updateText=function(e){r.setState({text:e.target.value})},r.generateHash=function(){var e=r.state.text,t=window.BACKGROUND.keccakAsHex(e);console.log("generateHash: "+e+" -> "+t),r.setState({hash:t})},r.copy=function(){j("keccak_hash_element")},r.renderInputAdornment=function(){return Object(w.jsx)(_.a,{position:"end",children:Object(w.jsx)(K.a,{onClick:r.generateHash,variant:"contained",color:"primary",children:"Hash"})})},r.state={text:"",hash:""},r}return Object(i.a)(n,[{key:"render",value:function(){var e={endAdornment:this.renderInputAdornment()};return Object(w.jsxs)("div",{children:[Object(w.jsx)(G.a,{id:"input-text-to-kekkak",label:"Text",variant:"outlined",fullWidth:!0,value:this.state.text,onChange:this.updateText,InputProps:e}),Object(w.jsx)("br",{})," ",Object(w.jsx)("br",{}),Object(w.jsx)(G.a,{id:"keccak_hash_element",label:"Hash",variant:"outlined",fullWidth:!0,value:this.state.hash,readOnly:!0}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(F.a,{align:"right",children:Object(w.jsx)(K.a,{variant:"contained",color:"primary",onClick:this.copy,children:"Copy to clipboard"})})]})}}]),n}(a.a.Component),ze=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{})}}]),n}(a.a.Component),Je=ze,Ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsxs)(m.a,{variant:"h6",children:["Transaction type: ",this.context.transactionType]}),JSON.stringify(this.context.transactionParams)]})}}]),n}(a.a.Component);Ve.contextType=b;var Ye=Ve,He=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).mainStyle={padding:"30px 20px 15px 20px",height:"415px",background:"linear-gradient(171.17deg, #B5FFB4 -41.33%, #E1F6FF 12.71%, #FFF496 105.58%, #FED5FF 154.44%)",overflow:"scroll"},e.pages={splash:{title:"Welcome to Wika!",component:Object(w.jsx)(M,{})},like:{title:"Like a web page",component:Object(w.jsx)(Te,{})},recommend:{title:"Recommendations",component:Object(w.jsx)(Ie,{})},wallet:{title:"Wallet",component:Object(w.jsx)(Me,{})},account:{title:"Account",component:Object(w.jsx)(ke,{})},liked_pages:{title:"Liked pages",component:Object(w.jsx)(qe,{})},owned_pages:{title:"Owned pages",component:Object(w.jsx)(_e,{})},claim_page:{title:"Claim page ownership",component:Object(w.jsx)(Fe,{})},keccak:{title:"Keccak",component:Object(w.jsx)(Ee,{})},sign_transaction:{title:"Sign a Transaction",component:Object(w.jsx)(Ye,{})}},e.getTitle=function(){var t=e.pages[e.context.tab];return t?t.title:"WIP"},e.renderPage=function(){var t=e.pages[e.context.tab];return t?t.component:Object(w.jsx)(Je,{})},e.render=function(){return Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsx)(U,{title:e.getTitle()}),Object(w.jsx)("div",{style:e.mainStyle,children:e.renderPage()})]})},e}return Object(i.a)(n)}(a.a.Component);He.contextType=b;var Xe=He,Ze=n(709),$e=n(710),Qe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).styleFooter={backgroundColor:"#F9F9F9",bottom:0,left:0,right:0,height:"60px",padding:"10px 50px",borderTop:"1px dashed lightgray"},r.styleMenu={position:"absolute",bottom:"85px",right:"5px"},r.buttonClicked=function(e){"toggleMenu"===e?r.toggleMenu():r.navigate(e)},r.toggleMenu=function(){var e=!r.state.menuOpened;r.setState({menuOpened:e})},r.navigate=function(e){r.setState({menuOpened:!1}),r.context.navigate(e)},r.renderMenuItem=function(e,t,n){return Object(w.jsxs)(te.a,{onClick:function(){return r.navigate(n)},children:[Object(w.jsx)(ce.a,{children:Object(w.jsx)("i",{className:"far "+e})}),Object(w.jsx)(q.a,{children:t})]})},r.renderMenu=function(){return r.state.menuOpened?Object(w.jsx)(Ze.a,{style:r.styleMenu,children:Object(w.jsxs)($e.a,{children:[r.renderMenuItem("fa-user","Account","account"),r.renderMenuItem("fa-heart","Liked pages","liked_pages"),r.renderMenuItem("fa-bookmark","Owned pages","owned_pages"),r.renderMenuItem("fa-registered","Claim page ownership","claim_page"),r.renderMenuItem("fa-file-code","Keccak 256","keccak"),r.renderMenuItem("fa-handshake","Blockchains","blockchains"),r.renderMenuItem("fa-save","Settings","settings"),r.renderMenuItem("fa-gem","About","about")]})}):""},r.renderIcon=function(e,t,n){var a="default";return n===r.context.tab&&(a="primary"),Object(w.jsxs)(I.a,{item:!0,xs:3,align:"center",children:[Object(w.jsx)(v.a,{size:"small",color:a,"aria-label":"icon",onClick:function(){return r.buttonClicked(n)},sx:{fontSize:"18px",marginBottom:"5px"},children:Object(w.jsx)("i",{className:"far "+t})}),Object(w.jsx)("br",{}),Object(w.jsx)(m.a,{variant:"subtitle2",color:a,onClick:function(){return r.buttonClicked(n)},children:e})]})},r.state={menuOpened:!1},r}return Object(i.a)(n,[{key:"renderAccountButton",value:function(){var e=this;return Object(w.jsx)(F.a,{align:"center",sx:{paddingTop:"7px"},children:Object(w.jsx)(v.a,{variant:"extended",color:"primary",onClick:function(){return e.context.navigate("account")},children:"Connect your account"})})}},{key:"renderMainActions",value:function(){return Object(w.jsxs)(a.a.Fragment,{children:[Object(w.jsxs)(I.a,{container:!0,spacing:2,children:[this.renderIcon("Like","fa-thumbs-up","like"),this.renderIcon("Buy","fa-credit-card","buy"),this.renderIcon("Send","fa-paper-plane","wallet"),this.renderIcon("More","fa-plus-square","toggleMenu")]}),this.renderMenu()]})}},{key:"renderTransactionButtons",value:function(){return Object(w.jsxs)(F.a,{align:"center",sx:{paddingTop:"7px"},children:[Object(w.jsx)(v.a,{variant:"extended",color:"secondary",onClick:this.context.rejectTransaction,children:"Reject"}),"\xa0\xa0",Object(w.jsx)(v.a,{variant:"extended",color:"primary",onClick:this.context.confirmTransaction,children:"Confirm"})]})}},{key:"renderSwitch",value:function(){return this.context.account?"sign_transaction"!==this.context.tab?this.renderMainActions():this.renderTransactionButtons():"account"!==this.context.tab?this.renderAccountButton():""}},{key:"render",value:function(){return Object(w.jsx)("div",{style:this.styleFooter,children:this.renderSwitch()})}}]),n}(a.a.Component);Qe.contextType=b;var et=Qe,tt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.getAccountFromStorage(),r.getTabFromStorage()},r.getAccountFromStorage=function(){var e=Object(u.a)(r);window.BACKGROUND.storage.get("account",(function(t){e.setState({account:t},(function(){e.subscribeToBalance(),e._mountedAccount=!0,e._mounted=e._mountedTab&&e._mountedAccount}))}))},r.getTabFromStorage=function(){var e=Object(u.a)(r);window.BACKGROUND.storage.get("tab",(function(t){t||(t="splash"),e.setState({tab:t},(function(){e._mountedTab=!0,e._mounted=e._mountedTab&&e._mountedAccount}))}))},r.ping=function(){console.log("pong")},r.signTransaction=function(e,t,n,a){var c=Object(u.a)(r);console.log("signTransaction -> data",e,t,n,r._mounted),window.BACKGROUND.storage.get("accounts",(function(r){var s=function(e,t){return e?e.find((function(e){return e.address===t})):null}(r,n);console.log("signTransaction -> account",s),s&&(c.signTransactionCallback=a,c.selectAccount(s),c.setState({tab:"sign_transaction",transactionType:e,transactionParams:t}))}))},r.connectNetwork=function(e){var t=Object(u.a)(r),n=t.state.network;n.ready=!1,t.setState({network:n},(function(){window.BACKGROUND.network.connect(n.type,n.url,(function(){n.ready=!0,t.setState({network:n})}))}))},r.subscribeToBalance=function(){var e=Object(u.a)(r);e.unsubGetBalance&&(e.unsubGetBalance(),e.unsubGetBalance=null);e.setState({balance:{wika:null,usd:null}},(function(){if(e.state.account&&e.state.network.ready){var t=e.state.account.address;window.BACKGROUND.network.getBalance(t,(function(t){var n,r=h(t.data.free),a=null!=(n=r)?.02*n:null;e.setState({balance:{wika:r,usd:a}})})).then((function(t){e.unsubGetBalance=t}))}}))},r.selectAccount=function(e){console.log("App.selectAccount",e),window.BACKGROUND.storage.set("account",e),r.setState({account:e},r.subscribeToBalance)},r.navigate=function(e){window.BACKGROUND.storage.set("tab",e),r.setState({tab:e})},r.rejectTransaction=function(){r.signTransactionCallback("rejected"),window.close()},r.confirmTransaction=function(){var e=r.state.transactionType,t=r.state.transactionParams,n=r.state.account;window.BACKGROUND.sendTransaction(e,t,n,(function(e){"In block"===e.status&&(r.signTransactionCallback("confirmed"),window.close())}))},r.componentWillUnmount=function(){r._mounted=!1,r.unsubGetBalance&&r.unsubGetBalance()},r.state={tab:null,transactionType:null,transactionParams:null,network:{type:window.BACKGROUND.network.type,url:window.BACKGROUND.network.endpoint,ready:window.BACKGROUND.network.getReady()},api:{type:"Test API",url:"https://api-test.wika.network"},account:null,balance:{wika:null,usd:null}},r}return Object(i.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"wika-app",children:Object(w.jsxs)(b.Provider,{value:{tab:this.state.tab,network:this.state.network,account:this.state.account,balance:this.state.balance,navigate:this.navigate,selectAccount:this.selectAccount,apiEndpoint:this.state.api,transactionType:this.state.transactionType,transactionParams:this.state.transactionParams,rejectTransaction:this.rejectTransaction,confirmTransaction:this.confirmTransaction},children:[Object(w.jsx)(Xe,{}),Object(w.jsx)(et,{})]})})}}]),n}(a.a.Component),nt=(n(499),n(500),n(501),n(502),n(503),n(504),n(189)),rt=n(96),at=n(237),ct=n(694),st=n(692);var ot=n(282),it=ot.ApiPromise,ut=ot.WsProvider,lt=Object(i.a)((function e(){var t=this;Object(o.a)(this,e),this.connect=function(e,n,r){var a=t;return a.type=null,a.endpoint=null,a.api=null,a.wsProvider=new ut(n),it.create({provider:a.wsProvider}).then((function(t){a.type=e,a.endpoint=n,a.api=t,r()}))},this.getReady=function(){return null!=t.api},this.disconnect=function(e){return t.api.disconnect().then(e)},this.getBalance=function(e,n){return t.api.query.system.account(e,n)},this.getUrl=function(e,n){return t.api.query.likes.urls(e,n)},this.getLike=function(e,n,r){return t.api.query.likes.likes(e,n,r)},this.getLikePrice=function(e){return t.api.query.likes.likePrice(e)},this.getOwnersRequestPrice=function(e){return t.api.query.owners.requestPrice(e)},this.getUrlOwner=function(e,n){return t.api.query.owners.owners(e,n)},this.getOwnerRequest=function(e,n){return t.api.query.owners.requests(e,n)},this.getOwnerResult=function(e,n){return t.api.query.owners.results(e,n)},this.getBlockNumber=function(e){return t.api.query.system.number(e)},this.getUrlInfo=function(e,n,r){Promise.all([t.api.query.likes.urls(n),t.api.query.likes.likes(e,n)]).then((function(e){var t={urlLikes:Number(e[0][0]),likesSubmittedAt:Number(e[1][0]),likesSubmittedCount:Number(e[1][1]),likesSubmittedRemaining:Number(e[1][2])};r(t)}))},this.txLike=function(e,n,r){return t.api.tx.likes.like(e,n,r)},this.txOwnerRequest=function(e){return t.api.tx.owners.requestUrlCheck(e)},this.type=null,this.endpoint=null,this.api=null})),dt=n(695);function bt(e,t){switch(e){case"like":return window.BACKGROUND.network.txLike(t.url,t.referrer,t.numLikes);case"owner_request":return window.BACKGROUND.network.txOwnerRequest(t.url);default:return null}}var jt=Object(i.a)((function e(t,n,r){var a=this;Object(o.a)(this,e),this.txMonitor=function(e){var t=e.status;if(t.isInBlock)a.callback({status:"In block"});else if(t.isFinalized){a.unsubTransaction();var n={status:null},r=function(e){if(console.log(JSON.stringify(e)),!e.dispatchError)return null;try{var t=e.dispatchError.asModule;return"Transaction error ("+t.index+","+t.error+")"}catch(r){return"Transaction error"}}(n);r&&(n.error=r),a.callback(n)}},this.sendInExtension=function(){var e=a.account.address,t=new dt.a({type:"sr25519"}).addFromUri(a.account.phrase);console.log("sendTransactionLocal",e,t);var n=a;n.callback({status:"Sending"}),n.tx.signAndSend(t,n.txMonitor).then((function(e){n.unsubTransaction=e})).catch((function(e){n.callback({status:null,error:e})}))},this.sendUsingWeb3=function(){var e=a.account.source,t=a.account.address;console.log("sendTransactionWeb3",e,t);var n=a;Object(nt.c)(e).then((function(e){n.callback({status:"Sending"}),n.tx.signAndSend(t,{signer:e.signer},n.txMonitor).then((function(e){n.unsubTransaction=e})).catch((function(e){n.callback({status:null,error:e})}))}))},this.tx=t,this.account=n,this.callback=r})),ht=function(e,t,n,r){"ext"===window.BACKGROUND.env?function(e,t,n,r){var a=bt(e,t);new jt(a,n,r).sendInExtension()}(e,t,n,r):"web3"===n.mode?function(e,t,n,r){var a=bt(e,t);new jt(a,n,r).sendUsingWeb3()}(e,t,n,r):"wika"===n.mode&&function(e,t,n,r){window.WIKA_BRIDGE.transaction(e,t,n,r)}(e,t,n,r)},Ot=n(293),pt=n.n(Ot),ft=n(396),xt=n.n(ft),mt=n(693);function vt(e){var t="0x";return e.forEach((function(e){t+=("0"+(255&e).toString(16)).slice(-2)})),t}function wt(e){var t=new dt.a({type:"sr25519"}).addFromUri(e);return{address:t.address,addressRaw:vt(t.addressRaw),phrase:e,accountName:"<Account Name>"}}var kt=Object(i.a)((function e(){Object(o.a)(this,e),this.get=function(e,t){var n=window.localStorage.getItem(e);n&&(n=JSON.parse(n)),t(n)},this.set=function(e,t,n){var r=JSON.stringify(t);window.localStorage.setItem(e,r),n&&n()}})),gt=Object(i.a)((function e(){Object(o.a)(this,e),this.get=function(e,t){window.chrome.storage.local.get([e],(function(n){t(n[e])}))},this.set=function(e,t,n){var r={};r[e]=t,window.chrome.storage.local.set(r,n)}})),yt=Object(i.a)((function e(){var t=this;Object(o.a)(this,e),this.registerListener=function(){var e=t;window.chrome.runtime.onMessageExternal.addListener((function(t,n,r){var a=n.documentId;switch(t.message){case"ping":return e.ping(a,t,r);case"accounts":return e.accounts(a,t,r);case"transaction":return e.transaction(a,t,r);default:return e.debug(a,t,r)}}))},this.ping=function(e,t,n){n("pong")},this.accounts=function(e,t,n){window.BACKGROUND.storage.get("accounts",(function(e){var t=[];e&&(t=e.map((function(e){return{address:e.address,addressRaw:e.addressRaw,name:e.name}}))),n(t)}))},this.transaction=function(e,t,n){function r(e){n("confirmed"===e?{status:null}:{status:null,err:"Transaction was not confirmed"})}var a=window.open("index.html","extension_popup","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=500,height=630,left=400,top=100"),c=0;!function e(){c++,a.wikaReactApp&&a.wikaReactApp._mounted?a.wikaReactApp.signTransaction(t.txType,t.params,t.address,r):c<250?setTimeout(e,10):n({status:null,err:"Could not open the Wika extension"})}()},this.debug=function(e,t,n){n({message:"debug",source:e,request:t})},this.registerListener()}));console.log("EXECUTING BACKGROUND SCRIPT"),window.BACKGROUND={cryptoReady:!1,web3Wallets:null,network:new lt,encryptWithAES:function(e,t){return pt.a.encrypt(e,t).toString()},decryptWithAES:function(e,t){return pt.a.decrypt(e,t).toString(xt.a)},importAccount:wt,generateAccount:function(){return wt(Object(mt.a)(12))},web3Enable:nt.b,web3Accounts:nt.a,u8aToHex:rt.a,decodeAddress:at.a,keccakAsHex:ct.a,sendTransaction:ht};var Ct="chrome-extension"===window.location.href.split(":")[0]?"ext":"app";if(window.BACKGROUND.env=Ct,console.log("Detected env = "+Ct),window.BACKGROUND.storage="app"===Ct?new kt:new gt,window.BACKGROUND.initialize=function(e,t,n){Object(st.a)().then((function(){window.BACKGROUND.cryptoReady=!0,window.BACKGROUND.network.connect(e,t,(function(){window.BACKGROUND.web3Enable("Wika Network").then((function(e){window.BACKGROUND.web3Wallets=e,n()}))}))}))},"ext"===Ct){window.BACKGROUND.initialize("Wika Testnet","wss://testnode3.wika.network:443",(function(){console.log("BACKGROUND init done.")}))}"ext"===Ct&&(window.BACKGROUND.port=new yt);var At=Object(i.a)((function e(){var t=this;Object(o.a)(this,e),this.sendMessage=function(e,t){try{window.chrome.runtime.sendMessage("ggmlfkkonbpgadcefifckbldnkfjajae",e,(function(e,n){window.chrome.runtime.lastError?(console.log("WikaBridge Error: "+JSON.stringify(window.chrome.runtime.lastError)),t(null)):e?(console.log("WikaBridge response",e),t(e)):(console.log("WikaBridge response empty"),t(null))}))}catch(n){t(null)}},this.ping=function(e){t.sendMessage({message:"ping"},e)},this.accounts=function(e){t.sendMessage({message:"accounts"},e)},this.transaction=function(e,n,r,a){var c={message:"transaction",txType:e,params:n,address:r.address};a({status:"Confirming"}),t.sendMessage(c,a)}}));window.WIKA_BRIDGE=new At;window.BACKGROUND.initialize("Wika Testnet","wss://testnode3.wika.network:443",(function(){s.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(tt,{ref:function(e){window.wikaReactApp=e}})}),document.getElementById("root"))}))}},[[619,1,2]]]);
//# sourceMappingURL=main.dd8ab5d6.chunk.js.map