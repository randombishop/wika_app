(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{416:function(e,t){},423:function(e,t){},424:function(e,t){},442:function(e,t){},450:function(e,t){},452:function(e,t){},462:function(e,t){},464:function(e,t){},494:function(e,t){},496:function(e,t){},503:function(e,t){},504:function(e,t){},557:function(e,t,n){},558:function(e,t,n){},560:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(112),s=n.n(a),i=n(5),o=n(6),u=n(13),l=n(8),b=n(9),d=n(629),j=n(644),h=n(639),O=n(76),x=(n(272),n(357),n(640)),f=n(625);function p(e){document.getElementById(e).select(),document.execCommand("copy")}function m(e){return e/1e12}function k(e){return null!=e?e.toFixed(4)+" W":"-"}function v(e){return null!=e?e.toFixed(2)+" US$":"-"}function g(e){if(null==e)return null;var t,n,r,c,a,s;for(t="",r=e.length,n=0;n<r;)switch((c=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(c);break;case 12:case 13:a=e[n++],t+=String.fromCharCode((31&c)<<6|63&a);break;case 14:a=e[n++],s=e[n++],t+=String.fromCharCode((15&c)<<12|(63&a)<<6|(63&s)<<0)}return t}function y(e){var t="0x";return e.forEach((function(e){t+=("0"+(255&e).toString(16)).slice(-2)})),t}function w(e){if(console.log(JSON.stringify(e)),!e.dispatchError)return null;try{var t=e.dispatchError.asModule;return"Transaction error ("+t.index+","+t.error+")"}catch(n){return"Transaction error"}}function S(){return function(e){var t=new x.a({type:"sr25519"}).addFromUri(e);return{address:t.address,addressRaw:y(t.addressRaw),phrase:e,accountName:"<Account Name>"}}(Object(f.a)(12))}var C=Object(o.a)((function e(t){var n=this;Object(i.a)(this,e),this.connect=function(e){var t=n;return t.wsProvider=new j.a(t.endpoint),h.a.create({provider:t.wsProvider}).then((function(n){t.api=n,e()}))},this.disconnect=function(e){return n.api.disconnect().then(e)},this.getBalance=function(e,t){return n.api.query.system.account(e,t)},this.getUrl=function(e,t){return n.api.query.likes.urls(e,t)},this.getLike=function(e,t,r){return n.api.query.likes.likes(e,t,r)},this.getLikePrice=function(e){return n.api.query.likes.likePrice(e)},this.getOwnersRequestPrice=function(e){return n.api.query.owners.requestPrice(e)},this.getUrlOwner=function(e,t){return n.api.query.owners.owners(e,t)},this.getOwnerRequest=function(e,t){return n.api.query.owners.requests(e,t)},this.getOwnerResult=function(e,t){return n.api.query.owners.results(e,t)},this.getBlockNumber=function(e){return n.api.query.system.number(e)},this.getUrlInfo=function(e,t,r){Promise.all([n.api.query.likes.urls(t),n.api.query.likes.likes(e,t)]).then((function(e){var t={urlLikes:Number(e[0][0]),likesSubmittedAt:Number(e[1][0]),likesSubmittedCount:Number(e[1][1]),likesSubmittedRemaining:Number(e[1][2])};r(t)}))},this.txLike=function(e,t,r,c,a,s){return n.api.tx.likes.like(r,c,a).signAndSend(e,{signer:t.signer},s)},this.txOwnerRequest=function(e,t,r,c){return n.api.tx.owners.requestUrlCheck(r).signAndSend(e,{signer:t.signer},c)},this.txLikeExt=function(e,t,r,c,a,s){console.log(e,t,r,c,a);var i=n,o={},u=function(e){var t=e.status;if(t.isInBlock)s({status:"In block"});else if(t.isFinalized){o.unsubTransaction();var n=w(e);s(n?{status:"Error",err:n}:{status:"Done"})}};Object(O.c)(e).then((function(e){s({status:"Sending"}),i.txLike(t,e,r,c,a,u).then((function(e){o.unsubTransaction=e})).catch((function(e){i.setState({txStatus:null}),s({status:"Error",err:e})}))}))},this.endpoint=t,this.api=null})),N=c.a.createContext(),A=n(653),R=n(652),U=n(655),T=n(239),B=n(656),L=n(647),q=n(0),P=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"renderStatus",value:function(){switch(this.context.network.status){case"connected":return Object(q.jsx)("i",{style:{color:"green"},className:"fas fa-check"});case"disconnected":return Object(q.jsx)("i",{style:{color:"red"},className:"fas fa-times"});case"connecting":return Object(q.jsx)("i",{style:{color:"orange"},className:"fas fa-spinner"});default:return""}}},{key:"render",value:function(){return Object(q.jsxs)(L.a,{color:"primary",variant:"contained",children:[Object(q.jsx)("i",{className:"fas fa-network-wired"}),"\xa0\xa0",this.context.network.type,"\xa0\xa0",this.renderStatus()]})}}]),n}(c.a.Component);P.contextType=N;var M=P,_=n(122),W=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"renderDisconnected",value:function(){var e=this;return Object(q.jsxs)(L.a,{color:"primary",variant:"contained",onClick:function(){return e.context.navigate("account")},children:[Object(q.jsx)("i",{className:"far fa-user-circle"}),"\xa0\xa0 Connect account"]})}},{key:"renderConnected",value:function(){var e=this;return Object(q.jsxs)(L.a,{color:"primary",variant:"contained",onClick:function(){return e.context.navigate("account")},children:[Object(q.jsx)(_.a,{size:24,value:this.context.account.address}),"\xa0\xa0",k(this.context.balance.wika)]})}},{key:"render",value:function(){return this.context.account?this.renderConnected():this.renderDisconnected()}}]),n}(c.a.Component);W.contextType=N;var I=W,F=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).navigate=function(t){e.context.navigate(t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(q.jsx)(R.a,{sx:{flexGrow:1},children:Object(q.jsx)(A.a,{position:"static",children:Object(q.jsxs)(U.a,{children:[Object(q.jsx)(B.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:function(){return e.context.navigate("splash")},children:Object(q.jsx)("img",{src:"images/logo_alt1.png",alt:"",width:"32",height:"32"})}),Object(q.jsx)(T.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(q.jsx)(M,{})}),Object(q.jsx)(I,{})]})})})}}]),n}(c.a.Component);F.contextType=N;var E=F,z=n(654),D=n(657),V=n(658),G=n(377),J=n.n(G),Y=n(378),K=n.n(Y),H=n(379),X=n.n(H),Z=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).styleBox={textAlign:"center",width:"80px"},r.styleButton={borderRadius:"50px",padding:"5px 10px"},r.styleButtonText={fontSize:"12px",color:"#1095c1"},r.styleMenu={position:"absolute",bottom:"5px",right:"5px",backgroundColor:"aliceblue",padding:"10px",borderRadius:"10px",opacity:"90%"},r.toggleMenu=function(){var e=!r.state.menuOpened;r.setState({menuOpened:e})},r.navigate=function(e){r.setState({menuOpened:!1}),r.context.navigate(e)},r.renderMenu=function(){return r.state.menuOpened?Object(q.jsx)("aside",{style:r.styleMenu,children:Object(q.jsx)("nav",{children:Object(q.jsxs)("ul",{children:[Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("account")},children:"Account"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("liked_pages")},children:"Liked pages"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("owned_pages")},children:"Owned pages"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("claim_page")},children:"Claim page ownership"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("keccak")},children:"Keccak 256"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("blockchains")},children:"Blockchains"})}),Object(q.jsx)("li",{children:Object(q.jsx)("a",{href:"/#",onClick:function(){return r.navigate("about")},children:"About"})})]})})}):""},r.buttonClass=function(e){return r.context.tab===e?"contrast":"primary"},r.renderButton=function(e,t,n){var c=function(){r.context.navigate(n)};return"toggleMenu"===n&&(c=r.toggleMenu),Object(q.jsxs)("div",{style:r.styleBox,children:[Object(q.jsx)("a",{href:"/#",role:"button",style:r.styleButton,className:r.buttonClass(n),onClick:c,children:Object(q.jsx)("i",{className:"far "+t})}),Object(q.jsx)("br",{}),Object(q.jsx)("span",{style:r.styleButtonText,children:e})]})},r.state={menuOpened:!1},r}return Object(o.a)(n,[{key:"renderxxx",value:function(){return this.context.account?Object(q.jsxs)("div",{className:"main-buttonbar",children:[this.renderButton("Like","fa-thumbs-up","like"),this.renderButton("Buy","fa-credit-card","buy"),this.renderButton("Send","fa-paper-plane","wallet"),this.renderButton("Claim","fa-registered","claim_page"),this.renderButton("More","fa-caret-square-down","toggleMenu"),this.renderMenu()]}):""}},{key:"render",value:function(){return Object(q.jsx)("div",{className:"main-actions",children:Object(q.jsx)(z.a,{elevation:3,children:Object(q.jsxs)(D.a,{showLabels:!0,children:[Object(q.jsx)(V.a,{label:"Recents",icon:Object(q.jsx)(J.a,{})}),Object(q.jsx)(V.a,{label:"Favorites",icon:Object(q.jsx)(K.a,{})}),Object(q.jsx)(V.a,{label:"Nearby",icon:Object(q.jsx)(X.a,{})})]})})})}}]),n}(c.a.Component);Z.contextType=N;var $=Z,Q=n(659),ee=n(661),te=n(660),ne=n(648),re=n(662),ce=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).renderColumn=function(e,t,n){return Object(q.jsxs)(Q.a,{children:[Object(q.jsx)(te.a,{component:"img",image:t,alt:"",sx:{width:"80%",marginLeft:"10%",marginTop:"10px"}}),Object(q.jsxs)(ee.a,{children:[Object(q.jsx)(T.a,{gutterBottom:!0,variant:"h6",component:"div",children:e}),Object(q.jsx)(T.a,{variant:"body2",color:"text.secondary",children:n})]})]})},e.render=function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)(T.a,{variant:"h5",children:"Welcome to the Wika Network!"}),Object(q.jsx)("br",{}),Object(q.jsxs)(ne.a,{container:!0,spacing:2,children:[Object(q.jsx)(ne.a,{item:!0,xs:4,children:e.renderColumn("Consumers","images/splash1.png","Like your favorite pages and reward the authors and previous likers.")}),Object(q.jsx)(ne.a,{item:!0,xs:4,children:e.renderColumn("Authors","images/splash2.png","Register any web page and Wika users will be able to reward you directly.")}),Object(q.jsx)(ne.a,{item:!0,xs:4,children:e.renderColumn("Everyone","images/splash3.png","Protect your privacy and promote quality content.")})]}),Object(q.jsx)("br",{}),null==e.context.account?Object(q.jsx)(re.a,{children:Object(q.jsx)(L.a,{variant:"outlined",onClick:function(){return e.context.navigate("account")},children:"Connect your account and get started now!"})}):""]})},e}return Object(o.a)(n)}(c.a.Component);ce.contextType=N;var ae=ce,se=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).handleNumLikeChange=function(e){r.setState({numLikes:e.target.value},r.update)},r.submitLike=function(){var e=Object(u.a)(r),t=e.props.url,n=e.state.referrer,c=e.state.numLikes,a=e.context.account.source,s=e.context.account.address;Object(O.c)(a).then((function(r){e.setState({txStatus:"Sending..."},(function(){e.context.wikaNetwork.txLike(s,r,t,n,c,e.monitorLike).then((function(t){e.unsubTransaction=t})).catch((function(t){e.setState({txStatus:null}),alert(t)}))}))}))},r.monitorLike=function(e){var t=e.status;if(t.isInBlock)r.setState({txStatus:"In block..."});else if(t.isFinalized){r.setState({txStatus:null}),r.unsubTransaction();var n=w(e);n&&alert(n)}},r.renderButton=function(){return null==r.state.txStatus?Object(q.jsxs)("button",{onClick:r.submitLike,children:["Send ",r.state.numLikes," ",Object(q.jsx)("i",{className:"fas fa-thumbs-up"})]}):Object(q.jsxs)("button",{disabled:!0,children:[Object(q.jsx)("i",{className:"fas fa-spinner"})," ",r.state.txStatus]})},r.render=function(){return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsxs)("p",{children:["This page received ",Object(q.jsxs)("strong",{children:[r.props.urlLikes," likes"]}),"."]}),Object(q.jsx)("hr",{}),Object(q.jsx)("h5",{children:"Send likes to this page:"}),Object(q.jsx)("strong",{children:"Which URL referred you to the page?"}),Object(q.jsx)("input",{type:"text"}),Object(q.jsx)("strong",{children:"How much do you like it?"}),Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)("div",{style:{marginTop:"15px"},children:Object(q.jsx)("input",{style:{width:"250px"},type:"range",min:"1",max:"100",value:r.state.numLikes,onChange:r.handleNumLikeChange})}),Object(q.jsx)("div",{style:{marginTop:"10px",marginLeft:"15px"},children:Object(q.jsxs)("strong",{children:[r.state.numLikes," ",Object(q.jsx)("i",{className:"fas fa-thumbs-up"})]})})]}),Object(q.jsx)("strong",{children:"Cost of this transaction"}),Object(q.jsx)("input",{style:{textAlign:"right"},type:"text",readOnly:!0,value:k(r.props.likePrice*r.state.numLikes)}),r.renderButton()]})},r.state={numLikes:1},r}return Object(o.a)(n)}(c.a.Component);se.contextType=N;var ie=se,oe=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsxs)("p",{children:["This page received ",Object(q.jsxs)("strong",{children:[e.props.urlLikes," likes"]}),"."]}),Object(q.jsxs)("p",{children:["You sent it ",Object(q.jsxs)("strong",{children:[e.props.likesSubmittedCount," likes"]}),"."]}),Object(q.jsxs)("p",{children:["You are ranked ",Object(q.jsxs)("strong",{children:["#",e.props.likesSubmittedAt+1]})," on the queue of people who liked this page, therefore, you will start receiving rewards when it hits ",e.props.likesSubmittedAt*e.props.rewardWaitFactor+2," likes."]})]})},e}return Object(o.a)(n)}(c.a.Component),ue=oe,le=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).getLikePrice=function(){var e=Object(u.a)(r);e.context.wikaNetwork.getLikePrice((function(t){var n=m(t);e.setState({likePrice:n})})).catch((function(e){alert(e)}))},r.handleUrlChange=function(e){r.setState({url:e.target.value})},r.lookupUrl=function(){r.subscribeToUrl(),r.subscribeToLike(),r.setState({lookedUp:!0})},r.clearUrl=function(){r.unsubscribe(),r.setState({lookedUp:!1,url:"",likesSubmittedCount:null})},r.subscribeToUrl=function(){var e=Object(u.a)(r);e.unsubUrl&&(e.unsubUrl(),e.unsubUrl=null);var t=r.state.url;e.context.wikaNetwork.getUrl(t,(function(t){var n=Number(t[0]);e.setState({urlLikes:n})})).then((function(t){e.unsubUrl=t})).catch((function(e){alert(e)}))},r.subscribeToLike=function(){var e=Object(u.a)(r);e.unsubLike&&(e.unsubLike(),e.unsubLike=null);var t=r.context.account.address,n=r.state.url;e.context.wikaNetwork.getLike(t,n,(function(t){e.setState({likesSubmittedAt:Number(t[0]),likesSubmittedCount:Number(t[1]),likesSubmittedRemaining:Number(t[2])})})).then((function(t){e.unsubLike=t})).catch((function(e){alert(e)}))},r.componentWillUnmount=function(){r.unsubscribe()},r.unsubscribe=function(){r.unsubUrl&&r.unsubUrl(),r.unsubLike&&r.unsubLike()},r.renderPart1=function(){return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("label",{children:"URL"}),Object(q.jsx)("input",{type:"text",value:r.state.url,onChange:r.handleUrlChange,disabled:r.state.lookedUp}),r.state.lookedUp?Object(q.jsx)("button",{onClick:r.clearUrl,className:"contrast",children:"Clear"}):Object(q.jsx)("button",{onClick:r.lookupUrl,children:"Lookup URL status"})]})},r.renderPart2=function(){if(r.state.lookedUp&&null!=r.state.likesSubmittedCount)return r.state.likesSubmittedCount>0?Object(q.jsx)(ue,{urlLikes:r.state.urlLikes,likesSubmittedCount:r.state.likesSubmittedCount,likesSubmittedAt:r.state.likesSubmittedAt,rewardWaitFactor:r.state.rewardWaitFactor}):Object(q.jsx)(ie,{url:r.state.url,urlLikes:r.state.urlLikes,likePrice:r.state.likePrice})},r.render=function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)("h2",{children:"Like"}),r.renderPart1(),Object(q.jsx)("hr",{}),r.renderPart2()]})},r.state={lookedUp:!1,url:"",referrer:null,likePrice:null,rewardPrct:"33%",rewardTarget:1.33,rewardWaitFactor:4,urlLikes:null,likesSubmittedAt:null,likesSubmittedCount:null,likesSubmittedRemaining:null},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getLikePrice()}}]),n}(c.a.Component);le.contextType=N;var be=le,de=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsx)("div",{className:"main-content",children:Object(q.jsx)("h2",{children:"Recommend"})})}}]),n}(c.a.Component),je=de,he=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsx)("div",{className:"main-content",children:Object(q.jsx)("h2",{children:"Wallet"})})}}]),n}(c.a.Component),Oe=he,xe=n(643),fe=n(649),pe=n(665),me=n(664),ke=n(633),ve=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.enableWeb3(),r.fetchLocalAccounts()},r.enableWeb3=function(){r.setState({web3Wallets:null},(function(){Object(O.b)("Wika Network").then((function(e){r.setState({web3Wallets:e})}))}))},r.fetchLocalAccounts=function(){r.context.storage.get("accounts").then((function(e){console.log("result",e),r.setState({localAccounts:e})}))},r.handleModeChange=function(e){r.setState({mode:e.target.value})},r.continue=function(){"web3"===r.state.mode?r.props.next(r.state.mode,r.state.web3Wallets):r.props.next(r.state.mode,r.state.localAccounts)},r.renderSwitch=function(){return r.state.web3Wallets?Object(q.jsxs)(c.a.Fragment,{children:[r.renderRadioChoice(),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),r.renderMessage(),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),r.renderContinueButton()]}):r.renderWait()},r.renderWait=function(){return Object(q.jsxs)(T.a,{variant:"body1",children:[Object(q.jsx)("i",{className:"fas fa-spinner"}),"\xa0\xa0 Checking availability of Web3 wallets..."]})},r.renderRadioChoice=function(){return Object(q.jsxs)(me.a,{children:[Object(q.jsx)(ke.a,{id:"account-mode-radio-label",children:"Wallet management mode"}),Object(q.jsxs)(fe.a,{"aria-labelledby":"account-mode-radio-label",name:"radio-buttons-group",value:r.state.mode,onChange:r.handleModeChange,children:[Object(q.jsx)(pe.a,{value:"web3",control:Object(q.jsx)(xe.a,{}),label:"Web3 wallet (for example polkadot.js)"}),Object(q.jsx)(pe.a,{value:"local",control:Object(q.jsx)(xe.a,{}),label:"Local storage of this browser"})]})]})},r.renderMessage=function(){var e="";return e="local"===r.state.mode?"This will store the private keys in the local storage of the browser, protected by a password.\n                       Your password can't be retrieved if lost. Make sure to save it to safety.":0===r.state.web3Wallets.length?"No Polkadot wallets detected.\n                           Please install one and make sure you authorize this app to use it.":"Polkadot wallets detected and authorized with this app.\n                           Let's go!",Object(q.jsx)(T.a,{variant:"body1",children:e})},r.renderContinueButton=function(){var e=!1;return"web3"===r.state.mode&&0===r.state.web3Wallets.length&&(e=!0),Object(q.jsx)(re.a,{align:"right",children:Object(q.jsx)(L.a,{variant:"contained",disabled:e,onClick:r.continue,children:"Continue"})})},r.render=function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)(T.a,{variant:"h5",children:"Connect your account"}),Object(q.jsx)("br",{}),r.renderSwitch()]})},r.state={mode:"web3",web3Wallets:null,localAccounts:null},r}return Object(o.a)(n)}(c.a.Component);ve.contextType=N;var ge=ve,ye=n(667),we=n(666),Se=n(641),Ce=n(668),Ne=n(645),Ae=n(637),Re=n(635),Ue=n(669),Te=n(227),Be=n(90),Le=n(636),qe=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.getAccounts()},r.getAccounts=function(){r.setState({accounts:[]},(function(){Object(O.a)().then((function(e){r.setState({accounts:e})}))}))},r.handleProviderChange=function(e){r.setState({provider:e.target.value})},r.handleAccountChange=function(e){r.setState({account:e.target.value})},r.back=function(){r.props.back()},r.continue=function(){var e=r.state.accounts[r.state.account],t=e.address,n=e.meta.name,c=e.meta.source,a=Object(Te.a)(t),s={name:n,address:t,addressRaw:Object(Be.a)(a),source:c};r.props.next(s)},r.renderProviderItem=function(e,t){return Object(q.jsx)(we.a,{value:t,children:e.name+" ("+e.version+")"},t)},r.renderSelectProvider=function(){return Object(q.jsx)(R.a,{width:"100%",children:Object(q.jsxs)(me.a,{fullWidth:!0,children:[Object(q.jsx)(ye.a,{id:"select-web3-provider-label",children:"Web3 Provider"}),Object(q.jsx)(Se.a,{labelId:"select-web3-provider-label",label:"Web3 Provider",value:r.state.provider,onChange:r.handleProviderChange,children:r.props.providers.map(r.renderProviderItem)})]})})},r.renderAccountItem=function(e,t){return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsxs)(Ne.a,{alignItems:"flex-start",children:[Object(q.jsx)(Ue.a,{children:Object(q.jsx)(_.a,{value:e.address,size:40})}),Object(q.jsx)(Re.a,{primary:e.meta.name,secondary:(n=e.address,null==n?"":n.substr(0,5)+"..."+n.substr(44))}),Object(q.jsx)(Le.a,{children:Object(q.jsx)(xe.a,{value:t})})]}),Object(q.jsx)(Ae.a,{})]},t);var n},r.renderAccountList=function(){return Object(q.jsx)(fe.a,{name:"radio-buttons-group",value:r.state.account,onChange:r.handleAccountChange,children:Object(q.jsxs)(Ce.a,{width:"100%",children:[Object(q.jsx)(Ae.a,{}),r.state.accounts.map(r.renderAccountItem)]})})},r.renderActions=function(){return Object(q.jsxs)(re.a,{align:"right",children:[Object(q.jsx)(L.a,{color:"secondary",variant:"contained",onClick:r.back,children:"Back"}),"\xa0\xa0",Object(q.jsx)(L.a,{color:"primary",variant:"contained",onClick:r.continue,children:"Continue"})]})},r.render=function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)(T.a,{variant:"h5",children:"Select your account"}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),r.renderSelectProvider(),r.renderAccountList(),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),r.renderActions()]})},r.state={provider:0,accounts:[],account:0},r}return Object(o.a)(n)}(c.a.Component),Pe=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).render=function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)(T.a,{variant:"h5",children:"Select your account"}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),JSON.stringify(r.props.accounts)]})},r.state={account:0},r}return Object(o.a)(n)}(c.a.Component),Me=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).styleInputBox={fontSize:"16px",textAlign:"center"},e.copyElement=function(e){return function(){p(e)}},e.disconnect=function(){e.context.selectAccount(null)},e.render=function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)("h2",{children:"Account"}),Object(q.jsxs)("div",{style:{textAlign:"center",marginBottom:"35px"},children:[Object(q.jsx)(_.a,{value:e.context.account.address}),Object(q.jsx)("br",{}),Object(q.jsx)("strong",{children:e.context.account.name})]}),Object(q.jsx)("strong",{children:"Balance"}),Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)("div",{style:{flex:"50%",marginRight:"10px"},children:Object(q.jsx)("input",{type:"text",value:k(e.context.balance.wika),readOnly:!0,style:{textAlign:"right"}})}),Object(q.jsx)("div",{style:{flex:"50%",marginLeft:"10px"},children:Object(q.jsx)("input",{type:"text",value:v(e.context.balance.usd),readOnly:!0,style:{textAlign:"right"}})})]}),Object(q.jsxs)("strong",{children:["Public Address (Substrate format) \xa0\xa0",Object(q.jsx)("a",{href:"/#",onClick:e.copyElement("account_address_element"),children:Object(q.jsx)("i",{className:"far fa-copy"})})]}),Object(q.jsx)("input",{id:"account_address_element",type:"text",value:e.context.account.address,readOnly:!0,style:e.styleInputBox}),Object(q.jsxs)("strong",{children:["Public Address (Raw hex format) \xa0\xa0",Object(q.jsx)("a",{href:"/#",onClick:e.copyElement("account_address_raw_element"),children:Object(q.jsx)("i",{className:"far fa-copy"})})]}),Object(q.jsx)("input",{id:"account_address_raw_element",type:"text",value:e.context.account.addressRaw,readOnly:!0,style:e.styleInputBox}),Object(q.jsxs)("button",{onClick:e.disconnect,className:"contrast",children:["Disconnect this account \xa0\xa0\xa0",Object(q.jsx)("i",{className:"fas fa-sign-out-alt"})]})]})},e}return Object(o.a)(n)}(c.a.Component);Me.contextType=N;var _e=Me,We=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).cancelMode=function(){r.setState({selectedMode:null})},r.selectMode=function(e,t){r.setState({selectedMode:e,data:t})},r.selectAccount=function(e){r.context.selectAccount(e)},r.render=function(){return r.context.account?Object(q.jsx)(_e,{}):r.state.selectedMode?"web3"===r.state.selectedMode?Object(q.jsx)(qe,{providers:r.state.data,back:r.cancelMode,next:r.selectAccount}):Object(q.jsx)(Pe,{accounts:r.state.data,back:r.cancelMode,next:r.selectAccount}):Object(q.jsx)(ge,{next:r.selectMode})},r.state={selectedMode:null,data:null},r}return Object(o.a)(n)}(c.a.Component);We.contextType=N;var Ie=We,Fe=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.queryApi()},r.queryApi=function(){var e=Object(u.a)(r),t=r.context.account.address,n=r.context.apiEndpoint.url+"/user/"+t+"/liked_urls";console.log(n),fetch(n).then((function(e){return e.json()})).then((function(t){e.setState({urls:t})}))},r.state={urls:null},r}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)("h5",{children:"Liked pages"}),JSON.stringify(this.context.apiEndpoint),Object(q.jsx)("br",{}),JSON.stringify(this.state.urls)]})}}]),n}(c.a.Component);Fe.contextType=N;var Ee=Fe,ze=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.queryApi()},r.queryApi=function(){var e=Object(u.a)(r),t=r.context.account.address,n=r.context.apiEndpoint.url+"/user/"+t+"/owned_urls";console.log(n),fetch(n).then((function(e){return e.json()})).then((function(t){e.setState({urls:t})}))},r.state={urls:null},r}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)("h2",{children:"Owned pages"}),JSON.stringify(this.context.apiEndpoint),Object(q.jsx)("br",{}),JSON.stringify(this.state.urls)]})}}]),n}(c.a.Component);ze.contextType=N;var De=ze,Ve=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).DEFAULT_ACCOUNT="5C4hrfjw9DjXZTzV3MwzrrAr9P1MJhSrvWGWqi1eSuyUpnhM",r.NUM_BLOCKS_TO_WAIT=10,r.styleTextArea={fontFamily:"monospace",fontSize:"9px"},r.styleButton={padding:0,marginBottom:"4px"},r.componentDidMount=function(){r.getOwnersRequestPrice(),r.subscribeToBlockNumber()},r.getOwnersRequestPrice=function(){var e=Object(u.a)(r);e.context.wikaNetwork.getOwnersRequestPrice((function(t){var n=m(t);e.setState({requestPrice:n})})).catch((function(e){alert(e)}))},r.subscribeToBlockNumber=function(){var e=Object(u.a)(r);e.unsubBlockNumber&&(e.unsubBlockNumber(),e.unsubBlockNumber=null),e.context.wikaNetwork.getBlockNumber((function(t){e.setState({currentBlock:Number(t)})})).then((function(t){e.unsubBlockNumber=t})).catch((function(e){alert(e)}))},r.handleUrlChange=function(e){r.setState({url:e.target.value})},r.lookupUrl=function(){r.setState({lookedUp:!0}),r.subscribeToUrlOwner(),r.subscribeToOwnerRequest(),r.subscribeToOwnerResult()},r.subscribeToUrlOwner=function(){var e=Object(u.a)(r);e.unsubUrlOwner&&(e.unsubUrlOwner(),e.unsubUrlOwner=null);var t=e.state.url;r.setState({owner:null},(function(){e.context.wikaNetwork.getUrlOwner(t,(function(t){e.setState({owner:""+t})})).then((function(t){e.unsubUrlOwner=t})).catch((function(e){alert(e)}))}))},r.subscribeToOwnerRequest=function(){var e=Object(u.a)(r);e.unsubOwnerRequest&&(e.unsubOwnerRequest(),e.unsubOwnerRequest=null);var t=e.state.url;r.setState({requestBlock:null,requestAccount:null},(function(){e.context.wikaNetwork.getOwnerRequest(t,(function(t){e.setState({requestBlock:Number(t[0]),requestAccount:""+t[1]})})).then((function(t){e.unsubOwnerRequest=t})).catch((function(e){alert(e)}))}))},r.subscribeToOwnerResult=function(){var e=Object(u.a)(r);e.unsubOwnerResult&&(e.unsubOwnerResult(),e.unsubOwnerResult=null);var t=e.state.url;r.setState({resultBlock:null,resultNumVotes:null,resultNumVotesYes:null,resultNumVotesMajority:null,resultIntro:null,resultMark:null,resultOutcome:null},(function(){e.context.wikaNetwork.getOwnerResult(t,(function(t){var n={resultBlock:Number(t[0]),resultNumVotes:Number(t[1]),resultNumVotesYes:Number(t[2]),resultNumVotesMajority:Number(t[3]),resultIntro:t[4],resultMark:t[5],resultOutcome:t[6]};e.setState(n)})).then((function(t){e.unsubOwnerResult=t}))}))},r.unsubscribeUrl=function(){r.unsubUrlOwner&&r.unsubUrlOwner(),r.unsubOwnerRequest&&r.unsubOwnerRequest(),r.unsubOwnerResult&&r.unsubOwnerResult()},r.clearUrl=function(){r.unsubscribeUrl(),r.setState({lookedUp:!1,url:"",owner:null})},r.submitRequest=function(){var e=Object(u.a)(r),t=e.state.url,n=e.context.account.source,c=e.context.account.address;Object(O.c)(n).then((function(n){e.setState({txStatus:"Sending..."},(function(){e.context.wikaNetwork.txOwnerRequest(c,n,t,e.monitorRequest).then((function(t){e.unsubTransaction=t})).catch((function(t){e.setState({txStatus:null}),alert(t)}))}))}))},r.monitorRequest=function(e){var t=e.status;if(t.isInBlock)r.setState({txStatus:"In block..."});else if(t.isFinalized){r.setState({txStatus:null}),r.unsubTransaction();var n=w(e);n&&alert(n)}},r.testUrl=function(){},r.copyMark=function(){p("wika_mark_element")},r.componentWillUnmount=function(){r.unsubUrlOwner&&r.unsubUrlOwner(),r.unsubOwnerRequest&&r.unsubOwnerRequest(),r.unsubOwnerResult&&r.unsubOwnerResult(),r.unsubBlockNumber&&r.unsubBlockNumber()},r.renderPart1=function(){return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("label",{children:"URL"}),Object(q.jsx)("input",{type:"text",value:r.state.url,onChange:r.handleUrlChange,disabled:r.state.lookedUp}),r.state.lookedUp?Object(q.jsx)("button",{onClick:r.clearUrl,className:"contrast",children:"Clear"}):Object(q.jsx)("button",{onClick:r.lookupUrl,children:"Lookup URL status"})]})},r.renderPart2=function(){return r.state.lookedUp&&null!=r.state.owner?Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("hr",{}),Object(q.jsx)("label",{children:"Current Owner"}),Object(q.jsx)("input",{type:"text",readOnly:!0,defaultValue:r.formatOwner(r.state.owner)})]}):""},r.formatOwner=function(e){return e===r.DEFAULT_ACCOUNT?"-":e===r.context.account.address?"You are the owner!":e},r.renderPart3=function(){return r.state.lookedUp&&null!=r.state.owner&&r.state.owner!==r.context.account.address?Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("hr",{}),Object(q.jsx)("label",{children:"Preparation"}),Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsxs)("div",{style:{flex:"33%",paddingRight:"10px",textAlign:"center"},children:[Object(q.jsx)("button",{style:r.styleButton,className:"outline",onClick:r.copyMark,children:"1. Copy this"}),Object(q.jsx)("input",{id:"wika_mark_element",type:"text",readOnly:!0,defaultValue:"wika.network/author/"+r.context.account.addressRaw})]}),Object(q.jsxs)("div",{style:{flex:"33%",textAlign:"center"},children:[Object(q.jsx)("button",{disabled:!0,style:r.styleButton,className:"outline",children:"2. Insert it"}),Object(q.jsx)("small",{children:"(Use an invisible img or link for example.)"})]}),Object(q.jsxs)("div",{style:{flex:"33%",paddingLeft:"10px",textAlign:"center"},children:[Object(q.jsx)("button",{disabled:!0,style:r.styleButton,className:"outline",onClick:r.testUrl,children:"3. Test it"}),Object(q.jsx)("small",{children:r.renderTestResult()})]})]})]}):""},r.renderTestResult=function(){return null==r.state.testResult?"":!0===r.state.testResult?"YES":"NO"},r.renderPart4=function(){if(r.state.lookedUp){var e=r.state.requestAccount;return null==e||e===r.DEFAULT_ACCOUNT?r.renderSubmitRequest():e===r.context.account.address?r.renderMyRequest():r.renderOtherRequest()}return""},r.renderSubmitRequest=function(){return r.state.owner!==r.context.address?Object(q.jsxs)(c.a.Fragment,{children:[null==r.state.txStatus?Object(q.jsx)("button",{onClick:r.submitRequest,style:{marginBottom:"2px"},children:"Submit your request"}):Object(q.jsxs)("button",{disabled:!0,style:{marginBottom:"2px"},children:[Object(q.jsx)("i",{className:"fas fa-spinner"}),"\xa0\xa0",r.state.txStatus]}),Object(q.jsxs)("small",{children:["Note that the request fee is ",r.state.requestPrice," W"]})]}):""},r.renderMyRequestProgress=function(){var e=r.state.currentBlock-r.state.requestBlock;return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("hr",{}),Object(q.jsx)("br",{}),Object(q.jsxs)("label",{children:["Waiting for verification results (",e,"/",r.NUM_BLOCKS_TO_WAIT,")..."]}),Object(q.jsx)("progress",{value:e,max:r.NUM_BLOCKS_TO_WAIT})]})},r.renderMyRequestResult=function(){var e=r.state.resultOutcome?"fas fa-vote-yea":"fas fa-times";return Object(q.jsxs)(c.a.Fragment,{children:[Object(q.jsx)("hr",{}),Object(q.jsx)("br",{}),Object(q.jsxs)("div",{style:{fontSize:"18px",marginBottom:"15px"},children:[Object(q.jsx)("i",{className:e}),"\xa0\xa0 Your request was ",r.state.resultOutcome?"approved":"rejected","."]}),Object(q.jsx)("br",{}),Object(q.jsxs)("label",{children:["Verifications: ",r.state.resultNumVotes]}),Object(q.jsx)("br",{}),Object(q.jsxs)("label",{children:["Approvals: ",r.state.resultNumVotesYes]}),Object(q.jsx)("br",{}),Object(q.jsx)("label",{children:"Page intro"}),Object(q.jsx)("textarea",{style:r.styleTextArea,defaultValue:g(r.state.resultIntro),readOnly:!0}),Object(q.jsx)("label",{children:"Mark found"}),Object(q.jsx)("textarea",{style:r.styleTextArea,defaultValue:g(r.state.resultMark),readOnly:!0})]})},r.renderMyRequest=function(){return 0===r.state.resultBlock?r.renderMyRequestProgress():r.renderMyRequestResult()},r.renderOtherRequest=function(){return Object(q.jsxs)("p",{children:[Object(q.jsx)("i",{className:"fas fa-exclamation-triangle"})," \xa0 There is currently another user trying to claim ownership for this URL."]})},r.state={lookedUp:!1,url:"",requestPrice:null,owner:null,requestBlock:null,requestAccount:null,currentBlock:null,txStatus:null,testResult:null},r}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)("h2",{children:"Claim Page Ownership"}),this.renderPart1(),this.renderPart2(),this.renderPart3(),this.renderPart4()]})}}]),n}(c.a.Component);Ve.contextType=N;var Ge=Ve,Je=n(638),Ye=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).updateText=function(e){r.setState({text:e.target.value})},r.generateHash=function(){var e=r.state.text,t=Object(Je.a)(e);r.setState({hash:t})},r.copy=function(){p("keccak_hash_element")},r.state={text:"",hash:""},r}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsxs)("div",{className:"main-content",children:[Object(q.jsx)("h2",{children:"Keccak"}),Object(q.jsx)("label",{children:"Text"}),Object(q.jsx)("textarea",{value:this.state.text,onChange:this.updateText}),Object(q.jsx)("button",{onClick:this.generateHash,children:"Hash"}),Object(q.jsx)("input",{id:"keccak_hash_element",type:"text",value:this.state.hash,readOnly:!0,style:{fontSize:"10px",textAlign:"center"}}),Object(q.jsx)("button",{onClick:this.copy,children:"Copy to clipboard"})]})}}]),n}(c.a.Component),Ke=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsx)("div",{className:"main-content",children:Object(q.jsx)("h2",{children:"WIP"})})}}]),n}(c.a.Component),He=Ke,Xe=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).render=function(){switch(e.context.tab){case"splash":return Object(q.jsx)(ae,{});case"like":return Object(q.jsx)(be,{});case"recommend":return Object(q.jsx)(je,{});case"wallet":return Object(q.jsx)(Oe,{});case"account":return Object(q.jsx)(Ie,{});case"liked_pages":return Object(q.jsx)(Ee,{});case"owned_pages":return Object(q.jsx)(De,{});case"claim_page":return Object(q.jsx)(Ge,{});case"keccak":return Object(q.jsx)(Ye,{});default:return Object(q.jsx)(He,{})}},e}return Object(o.a)(n)}(c.a.Component);Xe.contextType=N;var Ze=Xe,$e=Object(o.a)((function e(){var t=this;Object(i.a)(this,e),this.get=function(e){return Promise.resolve(t.memory[e])},this.set=function(e,n){return t.memory[e]=n,Promise.resolve()},this.memory={};var n=S();n.accountName="Test1";var r=S();r.accountName="Test2",this.memory.accounts=[n,r]})),Qe={extension:$e,web:$e};var et=function(){var e="chrome-extension"===window.location.href.split(":")[0]?"extension":"web";return new Qe[e]},tt=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).componentDidMount=function(){r.loadCrypto()},r.loadCrypto=function(){var e=Object(u.a)(r),t=e.state.crypto;t.status="loading",e.setState({crypto:t},(function(){Object(d.a)().then((function(){t.status="ready",e.setState({crypto:t},e.connectNetwork)}))}))},r.connectNetwork=function(e){var t=Object(u.a)(r),n=t.state.network;n.status="connecting",t.setState({network:n},(function(){var e=new C(t.state.network.url);e.connect((function(){t.wikaNetwork=e,n.status="connected",t.setState({network:n},r.initLocalStorage)}))}))},r.initLocalStorage=function(){var e=et();r.setState({storage:e},r.subscribeToBalance)},r.subscribeToBalance=function(){var e=Object(u.a)(r);e.unsubGetBalance&&(e.unsubGetBalance(),e.unsubGetBalance=null);e.setState({balance:{wika:null,usd:null}},(function(){if(e.state.account&&"connected"===e.state.network.status){var t=e.state.account.address;e.wikaNetwork.getBalance(t,(function(t){var n,r=m(t.data.free),c=null!=(n=r)?.02*n:null;e.setState({balance:{wika:r,usd:c}})})).then((function(t){e.unsubGetBalance=t}))}}))},r.selectAccount=function(e){r.setState({account:e},r.subscribeToBalance)},r.navigate=function(e){r.setState({tab:e})},r.componentWillUnmount=function(){r.unsubGetBalance&&r.unsubGetBalance()},r.state={tab:"splash",crypto:{status:"loading"},network:{type:"Test Net",url:"wss://testnode3.wika.network:443",status:"connecting"},api:{type:"Test API",url:"https://api-test.wika.network"},account:null,balance:{wika:null,usd:null},storage:null},r}return Object(o.a)(n,[{key:"render",value:function(){return Object(q.jsx)("div",{className:"wika-app",children:Object(q.jsxs)(N.Provider,{value:{tab:this.state.tab,network:this.state.network,account:this.state.account,balance:this.state.balance,navigate:this.navigate,selectAccount:this.selectAccount,wikaNetwork:this.wikaNetwork,apiEndpoint:this.state.api,storage:this.state.storage},children:[Object(q.jsx)(E,{}),Object(q.jsx)(Ze,{}),Object(q.jsx)($,{})]})})}}]),n}(c.a.Component);n(557),n(558);s.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(tt,{ref:function(e){window.wikaReactApp=e}})}),document.getElementById("root"))}},[[560,1,2]]]);
//# sourceMappingURL=main.8017395c.chunk.js.map